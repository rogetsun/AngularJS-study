/*! angular-embed-timepicker 05-05-2014 */
!function(){angular.module("angular.embed.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).directive("timepicker",["$parse","$log","timepickerConfig","$locale",function(a,b,c,d){return{restrict:"EA",require:"?^ngModel",replace:!0,scope:{disableSeconds:"=",disableMinutes:"="},templateUrl:"src/angular-embed-timepicker/template/embedTimepicker.html",link:function(e,f,g,h){function i(){var a=parseInt(e.hours,10),b=e.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(e.showMeridian&&(12===a&&(a=0),e.meridian===q[1]&&(a+=12)),a):void 0}function j(){var a=parseInt(e.minutes,10);return a>=0&&60>a?a:void 0}function k(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function l(a){m(),h.$setViewValue(new Date(p)),n(a)}function m(){h.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1,e.invalidSeconds=!1}function n(a){var b=p.getHours(),c=p.getMinutes(),d=p.getSeconds();e.showMeridian&&(b=0===b||12===b?12:b%12),e.hours="h"===a?b:k(b),e.minutes="m"===a?c:k(c),e.seconds="s"===a?d:k(d),e.meridian=p.getHours()<12?q[0]:q[1],console.log(h.$modelValue),console.log(e.$parent)}function o(a){var b=new Date(p.getTime()+1e3*a);p.setHours(b.getHours(),b.getMinutes(),b.getSeconds()),l()}if(h){e.$parent.$watch(a(g.ngDisabled),function(a){e.readonlyInput=a});var p=new Date,q=angular.isDefined(g.meridians)?e.$parent.$eval(g.meridians):c.meridians||d.DATETIME_FORMATS.AMPMS,r=c.hourStep;g.hourStep&&e.$parent.$watch(a(g.hourStep),function(a){r=parseInt(a,10)});var s=c.minuteStep;g.minuteStep&&e.$parent.$watch(a(g.minuteStep),function(a){s=parseInt(a,10)});var t=c.secondStep;g.secondStep&&e.$parent.$watch(a(g.secondStep),function(a){t=parseInt(a,10)}),e.showMeridian=c.showMeridian,g.showMeridian&&e.$parent.$watch(a(g.showMeridian),function(a){if(e.showMeridian=!!a,h.$error.time){var b=i(),c=j();angular.isDefined(b)&&angular.isDefined(c)&&(p.setHours(b),l())}else n()});var u=f.find("input"),v=u.eq(0),w=u.eq(1),x=u.eq(2),y=angular.isDefined(g.mousewheel)?e.$eval(g.mousewheel):c.mousewheel;if(y){var z=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};v.bind("mousewheel wheel",function(a){e.readonlyInput||(e.$apply(z(a)?e.incrementHours():e.decrementHours()),a.preventDefault())}),w.bind("mousewheel wheel",function(a){e.readonlyInput||(e.$apply(z(a)?e.incrementMinutes():e.decrementMinutes()),a.preventDefault())}),x.bind("mousewheel wheel",function(a){e.readonlyInput||(e.$apply(z(a)?e.incrementSeconds():e.decrementSeconds()),a.preventDefault())})}if(e.readonlyInput=angular.isDefined(g.readonlyInput)?e.$eval(g.readonlyInput):c.readonlyInput,e.readonlyInput)e.updateHours=angular.noop,e.updateMinutes=angular.noop,e.updateSeconds=angular.noop;else{var A=function(a,b,c){h.$setViewValue(null),h.$setValidity("time",!1),angular.isDefined(a)&&(e.invalidHours=a),angular.isDefined(b)&&(e.invalidMinutes=b),angular.isDefined(c)&&(e.invalidSeconds=c)};e.updateHours=function(){var a=i();angular.isDefined(a)?(p.setHours(a),l("h")):A(!0)},v.bind("blur",function(){!e.validHours&&e.hours<10&&e.$apply(function(){e.hours=k(e.hours)})}),e.updateMinutes=function(){var a=j();angular.isDefined(a)?(p.setMinutes(a),l("m")):A(void 0,!0)},w.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=k(e.minutes)})}),e.updateSeconds=function(){var a=getSecondsFromTemplate();angular.isDefined(a)?(p.setSeconds(a),l("s")):A(void 0,!0)},x.bind("blur",function(){!e.invalidSeconds&&e.seconds<10&&e.$apply(function(){e.seconds=k(e.seconds)})})}h.$render=function(){var a=h.$modelValue?new Date(h.$modelValue):null;isNaN(a)?(h.$setValidity("time",!1),b.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(p=a),m(),n())},e.incrementHours=function(){o(60*t*60)},e.decrementHours=function(){o(60*-t*60)},e.incrementMinutes=function(){o(60*t)},e.decrementMinutes=function(){o(60*-t)},e.incrementSeconds=function(){o(t)},e.decrementSeconds=function(){o(t)},e.toggleMeridian=function(){o(720*(p.getHours()<12?1:-1)*60)}}}}}])}(window,document);